# PyQt 上位机软件开发文档

## 项目概述

本项目旨在开发一个基于PyQt的上位机软件，用于接收和显示来自嵌入式系统的八路信号数据。软件将使用JustFloat数据引擎解析串口接收到的数据，并在界面上以八个独立的图表显示每个通道的电压值。

## 界面设计

### 主界面布局

主界面采用网格布局，分为以下几个部分：

1. **顶部菜单栏**：
   - 包含“文件”、“设置”、“帮助”等菜单项。
   - “设置”菜单项中包含串口配置选项。

2. **左侧控制面板**：
   - 包含串口选择、波特率设置、停止位设置等控件。
   - 提供“连接”和“断开”按钮以控制串口连接状态。

3. **右侧数据显示区**：
   - 包含八个独立的图表，每个图表显示一个通道的电压值。
   - 每个图表下方显示当前电压值（0-3.3V）。

4. **底部状态栏**：
   - 显示串口连接状态和其他相关信息。

### 界面元素

- **串口选择下拉框**：列出可用的串口。
- **波特率选择下拉框**：提供常见的波特率选项（如9600, 115200等）。
- **停止位选择下拉框**：提供1位和2位的选项。
- **连接/断开按钮**：用于控制串口连接状态。
- **八个图表**：每个图表显示一个通道的电压值，使用PyQtGraph库实现。
- **当前电压值标签**：每个图表下方显示当前电压值。

## 数据处理

### 数据接收

- 使用`pyserial`库接收串口数据。
- 设置波特率为115200，停止位为1。

### 数据解析

- 使用JustFloat数据引擎解析接收到的数据。
- 每次接收到的数据包含八个浮点数，每个浮点数占用4字节。
- 数据帧尾为`{0x00, 0x00, 0x80, 0x7f}`。

### 数据显示

- 将解析后的浮点数转换为电压值（0-3.3V）。
- 在对应的图表上更新显示电压值。

## 功能实现

### 串口通信

- 使用`pyserial`库实现串口通信。
- 在连接按钮点击事件中初始化串口。
- 在断开按钮点击事件中关闭串口。

### 图表显示

- 使用`PyQtGraph`库绘制八个独立的图表。
- 每个图表显示一个通道的电压值。
- 定期更新图表以显示最新的电压值。

### 状态更新

- 在底部状态栏显示串口连接状态。
- 更新每个图表下方的当前电压值标签。

## 开发步骤

1. **环境搭建**：
   - 安装Python和必要的库（PyQt5, pyserial, PyQtGraph）。
   
2. **界面设计**：
   - 使用Qt Designer设计主界面。
   - 导出UI文件并将其转换为Python代码。

3. **功能实现**：
   - 实现串口通信功能。
   - 实现数据解析功能。
   - 实现图表显示功能。
   - 实现状态更新功能。

4. **测试与优化**：
   - 测试软件的功能和性能。
   - 根据测试结果进行优化。

## 结论

本开发文档详细描述了基于PyQt的上位机软件的设计和实现过程。通过合理的界面布局和功能实现，软件能够有效地接收和显示来自嵌入式系统的八路信号数据。